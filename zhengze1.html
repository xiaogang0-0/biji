<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>正则练习</title>
  <style>
  .wrap {border: 1px solid #000;
    width: 300px;
    height: 400px;
    margin: 30px auto;
    text-align: center;
  }
  input {
    outline: none;
    float: left;
    width: 200px;
    box-sizing:border-box;
    padding: 4px;
    font: 16px/20px '微软雅黑';
    margin: 10px 0;
    
  }
  .wrap span {
    float: left;
    width: 80px;
    font: 12px/30px '微软雅黑';
    margin: 10px 0;
  }
   #btn{
     width: 100%;
     height: 50px;
    box-sizing:border-box;
    padding: 4px;
    font: 16px/20px '微软雅黑';
     margin: 10px auto;
  }
  .wrap .green {
      border: 1px solid green;
  }
  .wrap .show {
      border: 1px solid red;
  }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- <form action="http://www.baidu.com"> -->
    <form>
         <span>用户QQ ：</span><input type="text">
         <span>用户邮箱：</span><input type="text">
         <span>生日：</span><input type="text">
         <input type="submit" value="点击提交" id="btn">
      </form>
  </div>
 
</body>
<script type="text/javascript">
window.onload = function(){
        var btn = document.getElementById('btn');//点击按钮
        var text = document.getElementsByTagName('input');//输入的内容
        
        var QQ = /^[1-9]\d{4,9}$/;  //QQ号5-10位数字
        var email = /^[a-zA-Z]\w{5,17}@\w+\.[a-z]{2,3}$/; //邮箱6-18位首字母为英文 末尾的话2-3位
        var ren = /^[12]\d{3}[-_\/年]([1-9]|10|11|12)[-_\/月]([1-9]|1[0-9]|2[0-9]|3[01])[-_\/日]*$/;
        //生日的正则:首先1开头的年份 中间(-/_年)  ([1-9]|10|11|12)
        var obj = {};//记录时间的对象



        blur();//失焦事件
        btn.addEventListener('click',fn);//提交按钮的点击事件




       function fn(){//提交按钮的点击事件
            if(QQ.test(text[0].value)){//QQ输入正确的话
                 text[0].className = 'green';
            }else{
                  text[0].className = 'show';
            }

            if(email.test(text[1].value)){//邮箱输入正确的话
                 text[1].className = 'green';
            }else{
                  text[1].className = 'show';
            }

            if(ren.test(text[2].value)){//生日输入正确的话    
                time()//调用时间函数  返回时间对象
                text[2].value.replace(/(\d+)\D+(\d+)\D+(\d+)/g,function($0,$1,$2,$3){//console.log($0,$1,$2,$3)
                          text[2].className = 'green';
                          if($1 > obj.year){//大于当前年数直接就不对了
                                text[2].className = 'show';
                          }
                          if($1 == obj.year && $2 > obj.month){//当前年数当前月
                                   text[2].className = 'show';
                         }
                          if($1 == obj.year && $2 == obj.month && $3 > obj.day){//当前年数当前月当前日
                                   text[2].className = 'show';
                         }
                })
            }else{
                  text[2].className = 'show';
            }
        }


        function time() {//获取时间的函数
              var date = new Date();  //创建时间对象
              var year = date.getFullYear(); //获取年份
              var month = date.getMonth()+1; //获取月份 0 - 11 获取到的月份要加1才是当前月份
              var day = date.getDate(); //获取日期 1 - 31

              obj = {
                  year:year,
                  month:month,
                  day:day
              }
              return obj;
        }

        function  blur(){//失焦事件
             text[0].onblur = function(){
                    if(QQ.test(text[0].value)){//QQ输入正确的话
                         text[0].className = 'green';
                    }else{
                          text[0].className = 'show';
                    }
            };
            text[1].onblur = function(){
                    if(email.test(text[1].value)){//邮箱输入正确的话
                         text[1].className = 'green';
                    }else{
                          text[1].className = 'show';
                    }
            }
            text[2].onblur = function(){
                if(ren.test(text[2].value)){//生日输入正确的话    
                      time()//调用时间函数  返回时间对象
                      text[2].value.replace(/(\d+)\D+(\d+)\D+(\d+)/g,function($0,$1,$2,$3){//console.log($0,$1,$2,$3)
                                text[2].className = 'green';
                                if($1 > obj.year){//大于当前年数直接就不对了
                                      text[2].className = 'show';
                                }
                                if($1 == obj.year && $2 > obj.month){//当前年数当前月
                                         text[2].className = 'show';
                               }
                                if($1 == obj.year && $2 == obj.month && $3 > obj.day){//当前年数当前月当前日
                                         text[2].className = 'show';
                               }
                      })
                }else{
                      text[2].className = 'show';
                }
            }
        }


}

</script>
</html>